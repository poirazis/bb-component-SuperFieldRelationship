{
  "type": "component",
  "metadata": {},
  "schema": {
    "name": "bb-component-SuperFieldRelationship",
    "friendlyName": "Super Field - Relationship",
    "description": "A Relationship Field component for Budibase",
    "icon": "Link",
    "requiredAncestors" : ["form"],
    "settings": [
      {
        "type": "select",
        "label": "Value Type",
        "key": "linkValueType",
        "defaultValue": "link",
        "placeholder": "Pick a Value type",
        "options": [
          {
            "label" : "Budibase",
            "value" : "link"
          },
          {
            "label": "Number",
            "value": "number"
          },
          {
            "label": "String",
            "value": "string"
          },
          {
            "label": "Array",
            "value": "array"
          }
        ]
      },
      {
        "type": "field/link",
        "label": "Field",
        "key": "field",
        "required": true,
        "dependsOn" : { "setting" : "linkValueType", "value": "link"}

      },
      {
        "type": "field/string",
        "label": "Field",
        "key": "fieldString",
        "required": true,
        "dependsOn" : { "setting" : "linkValueType", "value": "string"}
      },
      {
        "type": "field/number",
        "label": "Field",
        "key": "fieldNumber",
        "required": true,
        "dependsOn" : { "setting" : "linkValueType", "value": "number"}
      },
      {
        "type": "field/array",
        "label": "Field",
        "key": "fieldArray",
        "required": true,
        "dependsOn" : { "setting" : "linkValueType", "value": "array"}
      },
      {
        "type": "text",
        "label": "Label",
        "key": "label"
      },
      {
        "type": "text",
        "label": "Placeholder",
        "key": "placeholder",
        "placeholder": "Choose an option"
      },
      {
        "type": "text",
        "label": "Default value",
        "key": "defaultValue",
        "supportsConditions": false
      },
      {
        "type": "text",
        "label": "Help text",
        "key": "helpText"
      },
      {
        "type": "validation/link",
        "label": "Validation",
        "key": "validation",
        "dependsOn" : { "setting" : "linkValueType", "value": "link"}
      },
      {
        "type": "validation/string",
        "label": "Validation",
        "key": "validationCustom",
        "dependsOn" : { "setting" : "linkValueType", "value": "string"}
      },
      {
        "type": "event",
        "label": "On change",
        "key": "onChange",
        "context": [
          {
            "label": "Value",
            "key": "value"
          }
        ]
      },
      {
        "type" : "filter/relationship",
        "key" :  "filter",
        "dependsOn" : { "setting" : "linkValueType", "value": "link"},
        "label": "Filter",
        "resetOn" : "field"
      },
      {
        "type": "select",
        "label": "Control Type",
        "key": "controlType",
        "defaultValue": "select",
        "placeholder": "Pick an options type",
        "options": [
          {
            "label": "Select",
            "value": "select"
          },
          {
            "label": "Checkboxes",
            "value": "checkbox"
          },
          {
            "label": "Switches",
            "value": "switch"
          }
        ]
      },
      { 
        "type" : "columns",
        "key": "pickerColumns",
        "label" : "Picker Columns",
        "resetOn" : "tableId"
      },
      {
        "type" : "number",
        "key" : "optionsArrangement",
        "label" : "Columns",
        "defaultValue" : 2,
        "dependsOn" : {"setting": "controlType" , "value" : "select", "invert" : true }
      },
      {
        "type" : "number",
        "key" : "limitItems",
        "label" : "Limit Items",
        "defaultValue" : 10,
        "dependsOn" : {"setting": "controlType" , "value" : "select", "invert" : true }
      },
      {
        "type": "boolean",
        "label": "Autocomplete",
        "key": "autocomplete",
        "defaultValue": false
      },
      {
        "type": "boolean",
        "label": "MultiSelect",
        "key": "multi",
        "dependsOn" : {"setting" : "linkType" , "value" : "link", "invert" : true },
        "defaultValue": false
      },
      {
        "type": "boolean",
        "label": "Reordering",
        "key": "reorder",
        "dependsOn" : "multi",
        "defaultValue": false
      },
      {
        "type": "boolean",
        "label": "Disabled",
        "key": "disabled",
        "defaultValue": false
      },
      {
        "type": "boolean",
        "label": "Read only",
        "key": "readonly",
        "defaultValue": false,
        "dependsOn": {
          "setting": "disabled",
          "value": true,
          "invert": true
        }
      },
      {
        "type" : "boolean",
        "key"  : "showIcon",
        "label": "Add Inline Icon"
      },
      {
        "type" : "icon",
        "key"  : "icon",
        "label": "Icon",
        "resetOn" : "showIcon",
        "dependsOn" : "showIcon"
      },
      {
        "type" : "boolean",
        "key"  : "customButtons",
        "label": "Add Buttons"
      },
      {
        "type" : "buttonConfiguration",
        "key"  : "buttons",
        "nested" : true,
        "dependsOn" : "customButtons"
      },
      {
        "section" : true,
        "name": "Custom Relationship Settings",
        "dependsOn": { "setting": "linkValueType", "value" : "link", "invert" : true },
        "settings": [
          { 
            "type" : "table",
            "key": "tableId",
            "label" : "Table"
          },
          {
            "type" : "filter",
            "key" :  "filterCustom",
            "dependsOn" : { "setting" : "linkType", "value": "custom"},
            "label": "Filter",
            "resetOn" : "tableId"
          },
          {
            "type" : "number",
            "key" : "limitCustom",
            "label" : "Limit",
            "defaultValue" : 100
          },
          { 
            "type" : "field",
            "key": "valueColumn",
            "label" : "Value Column",
            "resetsOn" : "tableId"
          },
          { 
            "type" : "field",
            "key": "labelColumn",
            "label" : "Label Column",
            "resetsOn" : "tableId"
          },
          { 
            "type" : "multifield",
            "key": "filterColumns",
            "label" : "Search Columns",
            "resetsOn" : "tableId"
          },
          { 
            "type" : "field",
            "key": "colorColumn",
            "label" : "Color Column",
            "resetsOn" : "tableId"
          },
          { 
            "type" : "field",
            "key": "iconColumn",
            "label" : "Icon Column",
            "info" : "Must contain a remix icon class name",
            "resetsOn" : "tableId"
          }
        ]
      },
      {
        "tag" : "style",
        "type": "select",
        "label": "Layout",
        "key": "span",
        "defaultValue": 6,
        "showInBar": true,
        "barStyle": "buttons",
        "options": [
          {
            "label": "1 column",
            "value": 6,
            "barIcon": "Stop",
            "barTitle": "1 column"
          },
          {
            "label": "2 columns",
            "value": 3,
            "barIcon": "ColumnTwoA",
            "barTitle": "2 columns"
          },
          {
            "label": "3 columns",
            "value": 2,
            "barIcon": "ViewColumn",
            "barTitle": "3 columns"
          }
        ]
      }
    ]
  }
}